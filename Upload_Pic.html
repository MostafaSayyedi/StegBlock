<!DOCTYPE html>
<html>

<head>
  <script src="https://unpkg.com/vue"></script>
  <script src="https://unpkg.com/vue-picture-input"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/exif-js/2.3.0/exif.js" async></script>
  <link rel="stylesheet" type="text/css" href="node_modules/semantic-ui/dist/semantic.min.css">
  <link rel="stylesheet" type="text/css" href="css/app.css">

  <title>Vue exif getter In the browser!</title>
</head>

<body>
  <div id="app">
    <picture-input ref="pictureInput" @change="onChange"></picture-input>
    <template>

    </template>
  </div>
  <script>
    const app = new Vue({
      el: '#app',
      data() {
        return {
          message: 'Vue exif meta info getter',
          DateImage: "DateTimeDigitized",
          exifs: null
        }
      },
      components: {
        'picture-input': PictureInput
      },
      methods: {
        onChange(image) {

          //console.log('onChange!')
          if (image) {
            //let vm = this

            EXIF.getData(this.$refs.pictureInput.file, function () {
              //vm.exifs = this
              //let vm = this
              var imagedate = EXIF.getTag(this, "DateTime"),
                make = EXIF.getTag(this, "Make"),
                model = EXIF.getTag(this, "Model"),
                iWidth = EXIF.getTag(this, "ImageWidth"),
                iHeight = EXIF.getTag(this, "ImageHeight");

              //make.innerHTML = JSON.stringify(make,null, "\t");
              var imagedate2 = document.getElementById("imagedate2");
              imagedate2.innerHTML = `${imagedate}`;
              var make2 = document.getElementById("make2");
              make2.innerHTML = `${make}`;
              var Model2 = document.getElementById("Model2");
              Model2.innerHTML = `${model}`;

              var iWidth2 = document.getElementById("iWidth2");
              iWidth2.innerHTML = `${iWidth}`;

              var iHeight2 = document.getElementById("iHeight2");
              iHeight2.innerHTML = `${iHeight}`;

              //make.innerHTML = `${make}`;
              //alert("I was taken by a " + make + " " + model);
              //make.exifs = this
              //console.log('image info', this)
              //console.log('exif data', this.exifdata)
              //return window.console;
              //Make=this.exifdata;
              //return Make;
              //const make = EXIF.getTag(this, 'Make');
              //return make;
              // data.DataImage = (this.exifdata && this.exifdata.DataImage);
              //console.log("date image jadid : " + this.DateImage);
            })
          } else {
            console.log(`it's not image`)
          }
        },
        // getEI: function () {
        // EXIF.getData(imageElement, function () {
        // var make = EXIF.getTag(this, "Make"),
        //  model = EXIF.getTag(this, "Model");
        // alert("I was taken by a " + make + " " + model);
        //});
        //console.log("asdlajhasudhalushdaligusdhlaigh" + this.DateImage);
        //console.log(DateImage);
        //var old = console.log;
        //var logger = document.getElementById('log');
        //console.log = function (message) {
        // if (typeof message == 'object') {
        //   logger.innerHTML += (JSON && JSON.stringify ? JSON.stringify(message) : message) + '<br />';
        // } else {
        //  logger.innerHTML += message + '<br />';
        // }
        //}
        // console.log("the result is :" + (this.data && this.data.DataImage))
        //return (this.exifdata && this.exifdata.DateTime);
      }
    });
  </script>
 

  <div class="ui one column grid">
    <div class="row">
      <div class="column">
        <table class="ui celled table">
          <thead>
            <tr>
              <th>Property</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td data-label="Property">Name:</td>
              <td data-label="Value"><span id=""></span></td>
            </tr>
            <tr>
              <td data-label="Property">User ID:</td>
              <td data-label="Value"><span id=""></span></td>
            </tr>
            <tr>
              <td data-label="Property">Photo ID:</td>
              <td data-label="Value"><span id=""></span></td>
            </tr>
            <tr>
              <td data-label="Property">Photo Create Date:</td>
              <td data-label="Value"><span id="imagedate2"></span></td>
            </tr>
            <tr>
              <td data-label="Property">Camera Manufacture:</td>
              <td data-label="Value"><span id="make2"></span></td>
            </tr>
            <tr>
              <td data-label="Property">Camera Model:</td>
              <td data-label="Value"><span id="Model2"></span></td>
            </tr>
            <tr>
              <td data-label="Property">Image Width:</td>
              <td data-label="Value"><span id="iWidth2"></span></td>
            </tr>
            <tr>
              <td data-label="Property">Image Height:</td>
              <td data-label="Value"><span id="iHeight2"></span></td>
            </tr>
            <tr>
              <td data-label="Property">Image Hash:</td>
              <td data-label="Value"><span id="imageHash"></span></td>
            </tr>
          </tbody>
          <tfoot class="full-width">
            <tr>
              <th></th>
              <th colspan="4">
                <div class="ui center floated small primary labeled icon button">
                  <i class="lock icon"></i> Accept and Steg!
                </div>

              </th>
            </tr>
          </tfoot>
        </table>

      </div>
    </div>
  </div>


  </div>
  </div>
  <!-- <script>
    "use strict";
    window.onload = getExif;

    function getExif() {
      //  var img1 = document.getElementById("img1");
      //     EXIF.getData(img1, function() {
      //      var make = EXIF.getTag(this, "Make");
      //     var model = EXIF.getTag(this, "Model");
      //   var makeAndModel = document.getElementById("makeAndModel");
      //     makeAndModel.innerHTML = `${make} ${model}`;
      //   });

      var img3 = document.getElementById("img3");
      // EXIF.enableXmp();
      EXIF.getData(img3, function () {
        var allMetaData = EXIF.getAllTags(this);
        var img3WithXmpMetaData = document.getElementById("img3WithXmpMetaData");
        img3WithXmpMetaData.innerHTML = JSON.stringify(allMetaData, null, "\t");
      });
    }
  </script> -->


  <script src="https://code.jquery.com/jquery-3.1.1.min.js"
    integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
  <script src="node_modules/semantic-ui/dist/semantic.min.js"></script>
  <script src="imagehash.js"></script>
</body>

</html>